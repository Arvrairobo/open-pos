<ion-content>
  <ion-select style="background-color: silver;max-width: 100%;" [(ngModel)]="usrchoice">
    <ion-option value="today" selected>Today</ion-option>
    <ion-option value="last100">Last 100</ion-option>
  </ion-select>
  <ion-list *ngFor="let transac of listtransacrev">
    <ion-card *ngIf="(usrchoice=='today'&& getDate(transac.datetime) == getDate(currentdatetime)) || usrchoice=='last100'">
      <ion-grid>
        <ion-row>
          <ion-col col-6 style="text-align: left; color: gray;">{{transac.datetime1}}</ion-col>
          <ion-col col-6 style="text-align: end;"><b>{{transac.totalatax}}</b></ion-col>
        </ion-row>
        <ion-list *ngFor="let item of transac.itemslist" [hidden]="transac.expanded">
          <ion-row style="padding: 0px;">
            <ion-col col-8 style="text-align: left;">{{item.name}}</ion-col>
            <ion-col col-2 style="text-align: center;">{{item.qty}}</ion-col>
            <ion-col col-2 style="text-align: end;">{{item.price}}</ion-col>
          </ion-row>
        </ion-list>
        <ion-row *ngIf="transac.totaldisc!=transac.totalsum" style="padding: 0px;text-align: left; "
          [hidden]="transac.expanded">
          <ion-col col-8>
            {{"Discounted total:"|translate}} ({{transac.discount}}%)
          </ion-col>
          <ion-col col-4 style="text-align: end;">
            {{transac.totaldisc}}
          </ion-col>
        </ion-row>
        <ion-row *ngIf="transac.totalsum!=transac.totalatax" style="padding: 0px; text-align: left;"
          [hidden]="transac.expanded">
          <ion-col col-8>
            {{"Total after tax:"|translate}} ({{transac.taxrate}}%)
          </ion-col>
          <ion-col col-4 style="text-align: end;">
            {{transac.totalatax}}
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col col-6 *ngIf="getDate(transac.datetime) == getDate(currentdatetime)"><button ion-button small full style="background-color: gray; color: white"
              (click)="delTransac(transac)">{{"Delete Transaction"|translate}}</button></ion-col>
          <ion-col col-6><button ion-button small full style="background-color: gray; color: white"
              (click)="expandTransac(transac)">{{transac.expanded?"Expand":"Close"}}</button></ion-col>
        </ion-row>
      </ion-grid>
      <ion-grid line>
      </ion-grid>

    </ion-card>
  </ion-list>
</ion-content>